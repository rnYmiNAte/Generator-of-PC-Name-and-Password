name: Generate PC Name, Username, and Password

on:
  workflow_dispatch:

jobs:
  generate_credentials:
    runs-on: windows-latest

    steps:
      - name: Generate Credentials
        shell: pwsh
        run: |
          # Generate PC Name: PC-XXXX123 (4 random letters + 3 random digits)
          $pcName = "PC-" + (-join ((65..90) | Get-Random -Count 4 | ForEach-Object {[char]$_})) + (Get-Random -Minimum 100 -Maximum 999)
          
          # Generate Username: userXYZ (random 3 digits)
          $username = "user" + (Get-Random -Minimum 100 -Maximum 999)
          
          # Generate Password: 12 random characters
          $chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*'
          $password = -join ((1..12) | ForEach-Object { $chars[(Get-Random -Maximum $chars.Length)] })
          
          # Output to console
          Write-Output "PC Name: $pcName"
          Write-Output "Username: $username"
          Write-Output "Password: $password"
          
          # Save to file
          $content = @"
PC Name: $pcName
Username: $username
Password: $password
"@
          $content | Out-File -FilePath credentials.txt

      - name: Upload Artifact
        uses: actions/upload-artifact@v4
        with:
          name: credentials
          path: credentials.txt
